<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BevAlc Intelligence | Track Every Label. Spot Every Trend.</title>
    <meta name="description" content="The most comprehensive database of TTB label approvals. Track competitor launches, spot category trends, and monitor new market entrants.">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>◆</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">◆</span>
                <span class="logo-text">BevAlc Intelligence</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link active">Home</a>
                <a href="database.html" class="nav-link">Database</a>
                <a href="privacy.html" class="nav-link">Privacy</a>
                <a href="terms.html" class="nav-link">Terms</a>
            </div>
            <div class="nav-user" id="nav-user">
                <span class="user-greeting" id="user-greeting"></span>
                <a href="#signup" class="nav-cta" id="nav-cta">Get Access</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <p class="hero-eyebrow">Competitive Intelligence for Beverage Alcohol</p>
            <h1 class="hero-title">Track Every Label.<br><em>Spot Every Trend.</em></h1>
            <p class="hero-subtitle">The most comprehensive database of TTB label approvals. See what competitors are launching, track new market entrants, and spot category trends before they hit shelves.</p>
            
            <div class="hero-cta">
                <a href="#signup" class="btn btn-primary" id="hero-cta-primary">Get Free Access</a>
                <a href="database.html" class="btn btn-secondary">See Database</a>
            </div>
        </div>
    </section>

    <!-- Stats Banner -->
    <section class="stats">
        <div class="stats-container">
            <div class="stat">
                <span class="stat-number">630K+</span>
                <span class="stat-label">Label Approvals</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat">
                <span class="stat-number">Weekly</span>
                <span class="stat-label">Updates</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat">
                <span class="stat-number">All 50</span>
                <span class="stat-label">States + Imports</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat">
                <span class="stat-number">Free</span>
                <span class="stat-label">To Search</span>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="features-container">
            <h2 class="section-title">Built for Beverage Alcohol Professionals</h2>
            <p class="section-subtitle">Everything you need to stay ahead of the competition</p>
            
            <div class="features-grid">
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </div>
                    <h3>Powerful Search</h3>
                    <p>Find any label by brand name, producer, TTB ID, or company. Filter by origin, class/type, date range, and status.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 20V10"></path>
                            <path d="M18 20V4"></path>
                            <path d="M6 20v-4"></path>
                        </svg>
                    </div>
                    <h3>Trend Analysis</h3>
                    <p>Track category growth, spot emerging brands, and monitor competitor launch activity over time.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h3>Weekly Updates</h3>
                    <p>New approvals added every week automatically. Never miss a competitor launch or market entrant.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <path d="M3 9h18"></path>
                            <path d="M9 21V9"></path>
                        </svg>
                    </div>
                    <h3>Wine Details</h3>
                    <p>For wines: see grape varietal, vintage year, appellation, alcohol content, and pH levels.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            <path d="M9 12l2 2 4-4"></path>
                        </svg>
                    </div>
                    <h3>Complete Data</h3>
                    <p>630K+ label approvals and growing. Every spirit, wine, and malt beverage. All 50 states plus imports.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 3v18h18"></path>
                            <path d="M18 9l-5 5-4-4-3 3"></path>
                        </svg>
                    </div>
                    <h3>Category Filters</h3>
                    <p>Filter by broad categories (Whiskey, Vodka, Tequila, etc.) or drill down to specific subcategories.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Signup Section -->
    <section class="signup" id="signup">
        <div class="signup-container">
            <div class="signup-content">
                <h2 id="signup-title">Get Free Access</h2>
                <p id="signup-desc">Join beverage alcohol professionals using BevAlc Intelligence for competitive research.</p>
                
                <form class="signup-form" id="signup-form">
                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required placeholder="John">
                        </div>
                        <div class="form-group form-group-half">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required placeholder="Smith">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email">Work Email *</label>
                        <input type="email" id="email" name="email" required placeholder="john@company.com">
                    </div>
                    <div class="form-group">
                        <label for="company">Company *</label>
                        <input type="text" id="company" name="company" required placeholder="Acme Beverages">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="submit-btn">
                        <span class="btn-text">Get Free Access</span>
                        <span class="btn-loading" style="display: none;">
                            <svg class="spinner" viewBox="0 0 24 24" width="20" height="20">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="32" stroke-linecap="round"></circle>
                            </svg>
                            Processing...
                        </span>
                    </button>
                </form>
                
                <!-- Login form (hidden by default) -->
                <form class="signup-form" id="login-form" style="display: none;">
                    <div class="form-group">
                        <label for="login-email">Email Address *</label>
                        <input type="email" id="login-email" name="email" required placeholder="john@company.com">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="login-btn">
                        <span class="btn-text">Log Back In</span>
                        <span class="btn-loading" style="display: none;">Checking...</span>
                    </button>
                </form>
                
                <div class="signup-success" id="signup-success" style="display: none;">
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <h3>You're In!</h3>
                    <p>Check your email to confirm your subscription. You now have full access to the database.</p>
                    <a href="database.html" class="btn btn-primary" style="margin-top: 1rem;">Go to Database</a>
                </div>
                
                <div class="signup-exists" id="signup-exists" style="display: none;">
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <h3>Welcome Back!</h3>
                    <p>Your access has been restored. <a href="database.html">Go to the database →</a></p>
                </div>
                
                <p class="signup-note" id="signup-note">Free forever. No credit card required.</p>
                <p class="signup-legal" id="signup-legal">By signing up, you agree to our <a href="terms.html">Terms of Service</a> and <a href="privacy.html">Privacy Policy</a>.</p>
                
                <!-- Already have access link -->
                <div class="signup-login" id="signup-login">
                    <p>Already signed up? <a href="#" id="show-login">Log back in →</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <span class="logo-icon">◆</span>
                <span class="logo-text">BevAlc Intelligence</span>
            </div>
            <div class="footer-links">
                <a href="privacy.html">Privacy Policy</a>
                <a href="terms.html">Terms of Service</a>
                <a href="mailto:hello@bevalcintel.com">Contact</a>
            </div>
            <p class="footer-copyright">© 2025 BevAlc Intelligence. All rights reserved.</p>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script>
        // Check access and update nav on page load
        document.addEventListener('DOMContentLoaded', function() {
            const hasAccess = BevAlcAuth.hasAccess();
            const user = BevAlcAuth.getUser();
            
            if (hasAccess) {
                const navCta = document.getElementById('nav-cta');
                const userGreeting = document.getElementById('user-greeting');
                const heroCta = document.getElementById('hero-cta-primary');
                
                if (navCta) navCta.style.display = 'none';
                
                if (userGreeting && user.firstName) {
                    userGreeting.textContent = `Welcome, ${user.firstName}`;
                    userGreeting.style.display = 'inline';
                }
                
                if (heroCta) {
                    heroCta.textContent = 'Go to Database';
                    heroCta.href = 'database.html';
                }
            }
        });
        
        // Toggle between signup and login forms
        document.getElementById('show-login').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('signup-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'flex';
            document.getElementById('signup-title').textContent = 'Log Back In';
            document.getElementById('signup-desc').textContent = 'Enter your email to restore database access on this device.';
            document.getElementById('signup-note').innerHTML = '<a href="#" id="show-signup">← Back to signup</a>';
            document.getElementById('signup-legal').style.display = 'none';
            document.getElementById('signup-login').style.display = 'none';
            
            // Re-attach show-signup handler
            document.getElementById('show-signup').addEventListener('click', showSignupForm);
        });
        
        function showSignupForm(e) {
            e.preventDefault();
            document.getElementById('signup-form').style.display = 'flex';
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('signup-title').textContent = 'Get Free Access';
            document.getElementById('signup-desc').textContent = 'Join beverage alcohol professionals using BevAlc Intelligence for competitive research.';
            document.getElementById('signup-note').textContent = 'Free forever. No credit card required.';
            document.getElementById('signup-legal').style.display = 'block';
            document.getElementById('signup-login').style.display = 'block';
        }
        
        // Login form submission (restore access)
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value.trim();
            const btn = document.getElementById('login-btn');
            const btnText = btn.querySelector('.btn-text');
            const btnLoading = btn.querySelector('.btn-loading');
            
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';
            btn.disabled = true;
            
            // Grant access (trust-based for now)
            setTimeout(function() {
                localStorage.setItem('bevalc_user', JSON.stringify({
                    email: email,
                    restoredAt: new Date().toISOString()
                }));
                
                BevAlcAuth.grantAccess();
                
                // Show success
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('signup-note').style.display = 'none';
                document.getElementById('signup-exists').style.display = 'block';
            }, 500);
        });
        
        // Signup form submission
        document.getElementById('signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const submitBtn = document.getElementById('submit-btn');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoading = submitBtn.querySelector('.btn-loading');
            
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const company = document.getElementById('company').value.trim();
            
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline-flex';
            submitBtn.disabled = true;
            
            try {
                const response = await fetch('https://app.loops.so/api/newsletter-form/cmjua76k706b10iziksn06077', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams({
                        email: email,
                        firstName: firstName,
                        lastName: lastName,
                        company: company,
                        userGroup: '',
                        mailingLists: ''
                    })
                });
                
                // Store user info
                localStorage.setItem('bevalc_user', JSON.stringify({
                    firstName, lastName, email, company,
                    signedUpAt: new Date().toISOString()
                }));
                
                // GRANT ACCESS IMMEDIATELY
                BevAlcAuth.grantAccess();
                
                if (response.ok) {
                    // Show success
                    form.style.display = 'none';
                    document.getElementById('signup-login').style.display = 'none';
                    document.getElementById('signup-note').style.display = 'none';
                    document.getElementById('signup-legal').style.display = 'none';
                    document.getElementById('signup-success').style.display = 'block';
                } else {
                    const data = await response.json();
                    if (data.message && data.message.includes('already')) {
                        form.style.display = 'none';
                        document.getElementById('signup-login').style.display = 'none';
                        document.getElementById('signup-note').style.display = 'none';
                        document.getElementById('signup-legal').style.display = 'none';
                        document.getElementById('signup-exists').style.display = 'block';
                    } else {
                        // Still grant access even if Loops fails
                        form.style.display = 'none';
                        document.getElementById('signup-login').style.display = 'none';
                        document.getElementById('signup-note').style.display = 'none';
                        document.getElementById('signup-legal').style.display = 'none';
                        document.getElementById('signup-success').style.display = 'block';
                    }
                }
            } catch (error) {
                console.error('Signup error:', error);
                // Still grant access even if network fails
                form.style.display = 'none';
                document.getElementById('signup-login').style.display = 'none';
                document.getElementById('signup-note').style.display = 'none';
                document.getElementById('signup-legal').style.display = 'none';
                document.getElementById('signup-success').style.display = 'block';
            } finally {
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
