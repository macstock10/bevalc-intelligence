<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BevAlc Intelligence | Track Competitor Launches Weekly</title>
    <meta name="description" content="Weekly monitoring of TTB label approvals. Track competitor launches, spot new market entrants, and get category intelligence delivered every Sunday.">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>◆</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">◆</span>
                <span class="logo-text">BevAlc Intelligence</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link active">Home</a>
                <a href="database.html" class="nav-link">Database</a>
                <a href="#pricing" class="nav-link">Pricing</a>
                <a href="glossary.html" class="nav-link">Glossary</a>
            </div>
            <div class="nav-user" id="nav-user">
                <span class="user-greeting" id="user-greeting"></span>
                <span class="user-status" id="user-status"></span>
                <a href="#signup" class="nav-cta" id="nav-cta">Get Free Access</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <p class="hero-eyebrow">Weekly Competitive Intelligence for BevAlc</p>
            <h1 class="hero-title">See What's Launching Next.<br><em>Before It Hits the Shelves.</em></h1>
            <p class="hero-subtitle">Stop manually checking TTB. Get weekly changelogs of new brands, new SKUs, and competitor activity—delivered every Sunday with links to official filings.</p>
            
            <!-- Inline Email Signup -->
            <div class="hero-email-signup" id="hero-email-signup">
                <form class="hero-email-form" id="hero-email-form">
                    <input type="email" id="hero-email" placeholder="Enter your work email" required>
                    <button type="submit" class="btn btn-primary">Get Free Access</button>
                </form>
            </div>
            
            <div class="hero-cta" id="hero-cta-buttons">
                <a href="database.html" class="btn btn-secondary">Browse Database</a>
            </div>
            
            <p class="hero-note">Built for operators who need to track launches weekly: brand owners, importers, agencies, suppliers.</p>
        </div>
    </section>

    <!-- Stats Banner -->
    <section class="stats">
        <div class="stats-container">
            <div class="stat">
                <span class="stat-number">839K+</span>
                <span class="stat-label">Label Approvals</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat">
                <span class="stat-number">~2,500</span>
                <span class="stat-label">New Filings/Week</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat">
                <span class="stat-number">Competitor Alerts</span>
                <span class="stat-label">Delivered Every Sunday</span>
            </div>
        </div>
    </section>

    <!-- Who It's For Section -->
    <section class="personas">
        <div class="personas-container">
            <h2 class="section-title">Who It's For</h2>
            <p class="section-subtitle">If you ship product or advise brands, this saves you hours every week.</p>
            
            <div class="personas-grid">
                <div class="persona">
                    <div class="persona-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h3>Brand & Innovation Teams</h3>
                    <p>See competitor launches early. Track SKU expansion, flavor/format trends, and packaging signals—with direct links to official TTB filings.</p>
                </div>
                
                <div class="persona">
                    <div class="persona-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3>Importers & Distributors</h3>
                    <p>Track new entrants by origin + state. Spot what's building momentum before it's obvious.</p>
                </div>
                
                <div class="persona">
                    <div class="persona-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                        </svg>
                    </div>
                    <h3>Agencies & Consultants</h3>
                    <p>Client-ready data + weekly proof points. Exportable data with direct links to official filings for pitch decks.</p>
                </div>
                
                <div class="persona">
                    <div class="persona-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                        </svg>
                    </div>
                    <h3>Suppliers & Co-Packers</h3>
                    <p>Identify brands ramping SKU count (demand signals). Monitor bursts in filings by category.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- What You Get Section -->
    <section class="weekly-value">
        <div class="weekly-container">
            <h2 class="section-title">What You Get Every Sunday</h2>
            <p class="section-subtitle">Concrete intelligence, not just raw data.</p>
            
            <div class="weekly-grid">
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>New Brands</strong>
                        <span>First-seen in your category + geography (12-month lookback)</span>
                    </div>
                </div>
                
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>New SKUs</strong>
                        <span>First-time filings vs refiles—separated so you know what's real</span>
                    </div>
                </div>
                
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>Top 20 Most Active</strong>
                        <span>Which brands are pushing product this week</span>
                    </div>
                </div>
                
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>Origin Trends</strong>
                        <span>Top origins + direction vs 4-week baseline</span>
                    </div>
                </div>
                
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>Direct Filing Links</strong>
                        <span>Links to official TTB filings so you can view labels and full details</span>
                    </div>
                </div>
                
                <div class="weekly-item">
                    <div class="weekly-check">✓</div>
                    <div class="weekly-content">
                        <strong>Downloadable CSV</strong>
                        <span>Export your slice for analysis or client reports</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How We Reduce Noise -->
    <section class="noise-reduction">
        <div class="noise-container">
            <div class="noise-content">
                <h2>We Separate Signal from Noise</h2>
                <p>The biggest problem with raw TTB data? Refiles. A brand updating packaging looks the same as a brand launching something new.</p>
                <p><strong>We separate new-to-market activity from refiles/variants</strong> using brand+SKU matching and lookback rules. You see what actually matters.</p>
            </div>
            <div class="noise-visual">
                <div class="noise-stat">
                    <span class="noise-number">~55%</span>
                    <span class="noise-label">of weekly filings are refiles</span>
                </div>
                <div class="noise-stat">
                    <span class="noise-number">~45%</span>
                    <span class="noise-label">are genuinely new activity</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing" id="pricing">
        <div class="pricing-container">
            <h2 class="section-title">Simple Pricing</h2>
            <p class="section-subtitle">Start free. Upgrade when you need more.</p>
            
            <div class="pricing-grid">
                <!-- Free Tier -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Free</h3>
                        <div class="pricing-price">
                            <span class="price-amount">$0</span>
                            <span class="price-period">forever</span>
                        </div>
                    </div>
                    <ul class="pricing-features">
                        <li>Full database search</li>
                        <li>Weekly Market Pulse email</li>
                        <li>Category totals & top brands</li>
                        <li>TTB detail links</li>
                        <li>Glossary & documentation</li>
                    </ul>
                    <a href="#signup" class="btn btn-secondary btn-full" id="free-cta">Get Free Access</a>
                </div>
                
                <!-- Pro Tier -->
                <div class="pricing-card featured">
                    <div class="pricing-badge">Most Popular</div>
                    <div class="pricing-header">
                        <h3>Pro</h3>
                        <div class="pricing-price">
                            <span class="price-amount">$49</span>
                            <span class="price-period">/month</span>
                        </div>
                    </div>
                    <ul class="pricing-features">
                        <li><strong>Everything in Free, plus:</strong></li>
                        <li>Weekly changelog by category</li>
                        <li>New brands + new SKUs separated</li>
                        <li>Full CSV export</li>
                        <li>Direct links to official TTB filings</li>
                        <li>Competitor watchlists</li>
                        <li>Priority support</li>
                    </ul>
                    <button class="btn btn-primary btn-full" id="pro-cta">Get My Category Pack</button>
                    <p class="pricing-note">Add categories anytime. Cancel anytime.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Email Signup Section -->
    <section class="signup" id="signup">
        <div class="signup-container">
            <div class="signup-content">
                <h2 id="signup-title">Get the Weekly Changelog</h2>
                <p id="signup-desc">Join operators using BevAlc Intelligence to track competitor launches and spot market trends.</p>
                
                <form class="signup-form" id="signup-form">
                    <div class="form-group">
                        <label for="email">Work Email *</label>
                        <input type="email" id="email" name="email" required placeholder="john@company.com">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="submit-btn">
                        <span class="btn-text">Send Me the Weekly Changelog</span>
                        <span class="btn-loading" style="display: none;">
                            <svg class="spinner" viewBox="0 0 24 24" width="20" height="20">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="32" stroke-linecap="round"></circle>
                            </svg>
                            Processing...
                        </span>
                    </button>
                </form>
                
                <div class="signup-success" id="signup-success" style="display: none;">
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <h3>You're In!</h3>
                    <p>Check your email to confirm. You now have full access to the database.</p>
                    <a href="database.html" class="btn btn-primary" style="margin-top: 1rem;">Go to Database</a>
                </div>
                
                <div class="signup-exists" id="signup-exists" style="display: none;">
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <h3>Welcome Back!</h3>
                    <p>You already have access. <a href="database.html">Go to the database →</a></p>
                </div>
                
                <p class="signup-note" id="signup-note">Free forever. No credit card required.</p>
                <p class="signup-legal" id="signup-legal">By signing up, you agree to our <a href="legal.html#terms">Terms of Service</a> and <a href="legal.html#privacy">Privacy Policy</a>.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <span class="logo-icon">◆</span>
                <span class="logo-text">BevAlc Intelligence</span>
            </div>
            <div class="footer-links">
                <a href="legal.html#privacy">Privacy Policy</a>
                <a href="legal.html#terms">Terms of Service</a>
                <a href="glossary.html">Glossary</a>
                <a href="mailto:hello@bevalcintel.com">Contact</a>
            </div>
            <p class="footer-copyright">© 2025 BevAlc Intelligence. All rights reserved.</p>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script>
        const API_BASE = 'https://bevalc-api.mac-rowan.workers.dev';
        
        // Check access and subscription status on page load
        document.addEventListener('DOMContentLoaded', async function() {
            const hasAccess = BevAlcAuth.hasAccess();
            const user = BevAlcAuth.getUser();
            
            // Setup Pro CTA button
            const proCta = document.getElementById('pro-cta');
            if (proCta) {
                proCta.addEventListener('click', handleProUpgrade);
            }
            
            if (hasAccess) {
                const navCta = document.getElementById('nav-cta');
                const userGreeting = document.getElementById('user-greeting');
                const heroEmailSignup = document.getElementById('hero-email-signup');
                const freeCta = document.getElementById('free-cta');
                
                if (navCta) navCta.style.display = 'none';
                
                if (userGreeting && user && user.email) {
                    userGreeting.textContent = 'Hi there';
                    userGreeting.style.display = 'inline';
                }
                
                // Hide hero email form, show "Go to Database" button instead
                if (heroEmailSignup) {
                    heroEmailSignup.innerHTML = '<a href="database.html" class="btn btn-primary">Go to Database</a>';
                }
                
                if (freeCta) {
                    freeCta.textContent = 'You Have Access';
                    freeCta.href = 'database.html';
                }
                
                // Check if user is Pro
                if (user && user.email) {
                    try {
                        const response = await fetch(`${API_BASE}/api/stripe/customer-status?email=${encodeURIComponent(user.email)}`);
                        const data = await response.json();
                        
                        if (data.success && data.status === 'pro') {
                            const userStatus = document.getElementById('user-status');
                            
                            if (userStatus) {
                                userStatus.textContent = 'Pro';
                                userStatus.style.display = 'inline';
                                userStatus.className = 'user-status pro';
                            }
                            
                            if (proCta) {
                                proCta.textContent = 'You\'re on Pro';
                                proCta.disabled = true;
                            }
                            
                            // Store pro status
                            user.isPro = true;
                            BevAlcAuth.setUser(user);
                        }
                    } catch (e) {
                        console.log('Could not check subscription status');
                    }
                }
            }
        });
        
        // Handle Pro upgrade
        async function handleProUpgrade() {
            const user = BevAlcAuth.getUser();
            const proCta = document.getElementById('pro-cta');
            
            if (!user || !user.email) {
                // Redirect to signup first
                document.getElementById('signup').scrollIntoView({ behavior: 'smooth' });
                alert('Please sign up for free access first, then upgrade to Pro.');
                return;
            }
            
            // Check if already Pro
            if (user.isPro) {
                return;
            }
            
            const originalText = proCta.textContent;
            proCta.disabled = true;
            proCta.textContent = 'Loading...';
            
            try {
                const response = await fetch(`${API_BASE}/api/stripe/create-checkout`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: user.email,
                        successUrl: window.location.origin + '/database.html?upgraded=true',
                        cancelUrl: window.location.origin + '/#pricing'
                    })
                });
                
                const data = await response.json();
                
                if (data.success && data.url) {
                    window.location.href = data.url;
                } else {
                    alert('Something went wrong. Please try again.');
                    proCta.disabled = false;
                    proCta.textContent = originalText;
                }
            } catch (e) {
                alert('Something went wrong. Please try again.');
                proCta.disabled = false;
                proCta.textContent = originalText;
            }
        }
        
        // Hero email form submission
        document.getElementById('hero-email-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('hero-email').value.trim();
            
            if (email) {
                await submitEmail(email);
            }
        });
        
        // Main signup form submission
        document.getElementById('signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            
            if (email) {
                const submitBtn = document.getElementById('submit-btn');
                const btnText = submitBtn.querySelector('.btn-text');
                const btnLoading = submitBtn.querySelector('.btn-loading');
                
                btnText.style.display = 'none';
                btnLoading.style.display = 'inline-flex';
                submitBtn.disabled = true;
                
                await submitEmail(email, true);
                
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                submitBtn.disabled = false;
            }
        });
        
        // Shared email submission function
        async function submitEmail(email, showSuccessUI = false) {
            try {
                const response = await fetch('https://app.loops.so/api/newsletter-form/cmjua76k706b10iziksn06077', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams({
                        email: email,
                        firstName: '',
                        lastName: '',
                        company: '',
                        userGroup: '',
                        mailingLists: ''
                    })
                });
                
                const data = await response.json().catch(() => ({}));
                
                // Store user info
                localStorage.setItem('bevalc_user', JSON.stringify({
                    email: email,
                    signedUpAt: new Date().toISOString()
                }));
                
                // Grant access
                BevAlcAuth.grantAccess();
                
                if (showSuccessUI) {
                    // Check if user already existed
                    const alreadyExists = data.message && data.message.toLowerCase().includes('already');
                    
                    // Show appropriate success message
                    document.getElementById('signup-form').style.display = 'none';
                    document.getElementById('signup-note').style.display = 'none';
                    document.getElementById('signup-legal').style.display = 'none';
                    
                    if (alreadyExists) {
                        document.getElementById('signup-exists').style.display = 'block';
                    } else {
                        document.getElementById('signup-success').style.display = 'block';
                    }
                } else {
                    // Redirect to database
                    window.location.href = 'database.html';
                }
                
            } catch (error) {
                console.error('Signup error:', error);
                // Grant access anyway - don't block user due to network issues
                BevAlcAuth.grantAccess();
                
                localStorage.setItem('bevalc_user', JSON.stringify({
                    email: email,
                    signedUpAt: new Date().toISOString()
                }));
                
                if (showSuccessUI) {
                    document.getElementById('signup-form').style.display = 'none';
                    document.getElementById('signup-note').style.display = 'none';
                    document.getElementById('signup-legal').style.display = 'none';
                    document.getElementById('signup-success').style.display = 'block';
                } else {
                    window.location.href = 'database.html';
                }
            }
        }
    </script>
</body>
</html>
